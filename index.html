<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>@skilljava</title>
<link rel="icon" href="favicon.ico?v=2" type="image/x-icon">
<link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
/* ---------------------------------------------------------------------------------- */
/* 1. متغیرهای ریشه (Root Variables) */
/* ---------------------------------------------------------------------------------- */
:root {
    /* متغیرهای اصلی سایت */
    --bg:#0b0b0b;
    --red:#ff1a1a;
    --muted-red: rgba(255,26,26,0.18);
    --glass-bg: rgba(255,255,255,0.03);
    --glass-border: rgba(255,255,255,0.06);
    --text:#ffffff;
    --accent:#ff4b4b;
    --green:#21d07a;
    --yellow:#f9a825;
    --red-dnd:#f44336;
    --offline:#7f8c8d;
    --grid-white: rgba(255,255,255,0.08);
    --max-width: 1100px;
    --avatar-size: 96px;
    
    /* متغیرهای هدر ناوبری */
    --bg-header-dark: #050505; 
    --text-header-main: #ffffff;
    --text-header-muted: #9ca3af;
}

/* ---------------------------------------------------------------------------------- */
/* 2. استایل‌های پایه (Base Styles) */
/* ---------------------------------------------------------------------------------- */
*{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
html,body{
    /* تنظیم ارتفاع برای نمایش درست پس‌زمینه */
    height:100%; 
    margin:0; 
    padding:0;
    font-family:'Ubuntu',Inter,ui-sans-serif,system-ui,-apple-system,sans-serif;
    background:var(--bg); /* تضمین رنگ پس‌زمینه تیره */
    color:var(--text);
    line-height:1.45; 
    overflow-x:hidden; 
    scroll-behavior:smooth;
}

a { text-decoration: none; color: inherit; }
.container{max-width:var(--max-width);margin:0 auto;padding:40px 20px;}


/* ---------------------------------------------------------------------------------- */
/* 3. استایل‌های هدر ناوبری (Fixed Header) */
/* ---------------------------------------------------------------------------------- */
.site-header {
    display: flex;
    justify-content: center; 
    align-items: center;
    padding: 15px 40px; 
    
    /* افکت شیشه‌ای یخ‌زده */
    background: rgba(5, 5, 5, 0.5); 
    backdrop-filter: blur(10px); 
    
    border-radius: 0 0 15px 15px; 
    border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
    
    /* ثابت ماندن در بالا */
    position: sticky;
    top: 0;
    z-index: 1000;
    width: 100%;
}

.nav-links {
    display: flex;
    align-items: center;
    gap: 20px;
}

.nav-links a {
    color: var(--text-header-muted);
    text-decoration: none;
    font-size: 0.95rem;
    transition: 0.3s;
    padding: 5px 10px;
    border-radius: 8px;
    white-space: nowrap;
}

.nav-links a:hover, .nav-links a.active {
    color: var(--text-header-main);
    background-color: rgba(255, 255, 255, 0.05); 
}


/* ---------------------------------------------------------------------------------- */
/* 4. استایل‌های بخش اصلی پروفایل (Hero Section) */
/* ---------------------------------------------------------------------------------- */
.header{
    position:relative; 
    width:100%; 
    min-height:100vh; /* تضمین ارتفاع */
    height: auto;
    overflow:hidden; 
    display:flex; 
    flex-direction: column; 
    justify-content: center;
    /* تضمین پس‌زمینه تیره با گرادینت قرمز */
    background: linear-gradient(180deg, rgba(20,8,8,0.76) 0%, rgba(12,6,6,0.88) 60%), linear-gradient(180deg, rgba(16,2,2,0.25), rgba(8,0,0,0.0));
    padding-bottom: 50px; 
    padding-top: 50px; /* فضای بالا برای جلوگیری از چسبیدن به هدر ناوبری */
}

/* افکت‌های پس‌زمینه: **این بخش برای نمایش پس‌زمینه تیره حیاتی است** */
.header::before{content:"";position:absolute;inset:0;background: radial-gradient(circle at 30% 40%, rgba(255,20,20,0.18) 0%, rgba(0,0,0,0) 40%);filter: blur(34px);z-index:0;pointer-events:none;}
.header::after{content:"";position:absolute;inset:0;background: linear-gradient(180deg, rgba(255,20,20,0.02), rgba(0,0,0,0.12));z-index:1;pointer-events:none;}

.canvas-wrap{position:absolute;inset:0;z-index:2;pointer-events:none;}
.particle-wrap{position:absolute;inset:0;z-index:3;pointer-events:none;}

.header-inner{
    position:relative; z-index:10; max-width:var(--max-width); margin:0 auto;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    gap:20px; padding:20px; width: 100%;
}

.profile-glass{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:18px; border:1px solid var(--glass-border); padding:20px;
    backdrop-filter:blur(10px) saturate(120%); display:flex; gap:16px; align-items:center;
    max-width: 100%;
}

/* آواتار */
.avatar{
    position: relative; 
    width:var(--avatar-size); height:var(--avatar-size);
    border-radius:50%; border:none; flex-shrink:0;
} 
.profile-decorator {
    position: absolute; top: -10px; left: -10px;
    width: calc(var(--avatar-size) + 20px); height: calc(var(--avatar-size) + 20px);
    border-radius: 50%;
    /* اطمینان از وجود این فایل عکس */
    background: url('angry.png') center / cover; 
    z-index: 5; pointer-events: none;
}
.avatar img{
    position: relative; z-index: 4;
    width:100%; height:100%; object-fit:cover; border-radius: 50%; 
}
.discord-status-dot{
  position: absolute; bottom: 0px; right: 0px;
  width: 20px; height: 20px; border-radius: 50%;
  border: 3px solid var(--bg); background-color: var(--offline);
  transition: background-color 0.5s ease;
  display: flex; align-items: center; justify-content: center; z-index: 6; 
}

/* متن‌ها و کارت‌ها */
.meta{display:flex;flex-direction:column;gap:6px;}
.meta .name{font-size:1.55rem;font-weight:700;color:var(--text);}
.meta .subtitle{font-size:0.92rem;color:rgba(255,255,255,0.72);}

.badge{
    margin-top:6px; display:inline-flex; align-items:center; gap:6px; 
    padding:6px 12px; border-radius:999px;
    background: rgba(0,0,0,0.22); border:1px solid rgba(255,255,255,0.03);
    color:var(--text); font-weight:700; font-size:0.88rem;
}
.badge .dot { width:10px; height:10px; border-radius:50%; background:var(--green); }

.header-desc{
    margin-top:18px; color: rgba(255,255,255,0.84); font-size:0.98rem;
    line-height:1.5; text-align:center; max-width:600px; padding: 0 10px;
}

.info-cards-container {
    display:flex; gap:20px; justify-content:center; flex-wrap:wrap; 
    margin-top:20px; width: 100%;
}

.info-card {
  background: rgba(255, 255, 255, 0.05);
  border:1px solid rgba(255,255,255,0.1);
  backdrop-filter: blur(8px);
  border-radius:14px; padding:20px 30px;
  color:white; font-weight:500; font-size:1rem;
  text-align:left; width:220px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
  transition: transform 0.3s ease, box-shadow 0.3s ease; 
}
.info-card:hover{ transform: translateY(-5px); box-shadow: 0 10px 20px rgba(255, 75, 75, 0.15); }

/* لینک‌های شبکه‌های اجتماعی */
.social-link{
  display: flex; align-items: center; gap: 12px;
  text-decoration: none; color: rgba(255,255,255,0.9);
  margin-bottom: 10px; font-size: 0.95rem; transition: color 0.3s ease;
}
.social-link:hover{color: var(--accent);}
.social-icon{width: 20px; text-align: center; color: var(--accent);}

/* --- Spotify Progress Bar و وضعیت دیسکورد --- */
#dndStatusBadge {
    display: inline-flex; align-items: center; gap: 4px; padding: 3px 8px;
    border-radius: 6px; background-color: var(--red-dnd); color: white;
    font-size: 0.75rem; font-weight: 700; margin-left: auto; 
    height: 22px; white-space: nowrap;
}
.spotify-progress-bar {
    height: 4px; background-color: rgba(255, 255, 255, 0.1); border-radius: 2px;
    margin-top: 5px; margin-bottom: 2px; overflow: hidden;
}
.spotify-progress-fill {
    height: 100%; width: 0%; background-color: var(--green); transition: width 1s linear;
}
.spotify-timestamps {
    display: flex; justify-content: space-between; font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.6);
}
.discord-activity-item {
    border-left: 3px solid;
    padding-left: 10px;
    margin-bottom: 10px;
}
.spotify-track-info { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
.spotify-album-art { width: 40px; height: 40px; border-radius: 8px; flex-shrink: 0; }
.spotify-details { display: flex; flex-direction: column; overflow: hidden; }
.spotify-title { font-weight: 700; font-size: 0.9rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.spotify-artist { font-size: 0.8rem; color: rgba(255, 255, 255, 0.7); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }


/* --- Responsive Media Query --- */
@media (max-width: 768px) {
    .container { padding: 20px 15px; }
    .site-header { padding: 10px 15px; }
    .nav-links { gap: 10px; overflow-x: auto; padding-bottom: 5px; }
    .nav-links a { font-size: 0.85rem; padding: 5px 8px; }
    .profile-glass {
        flex-direction: column; text-align: center;
        width: 100%;
    }
    .meta { align-items: center; }
    .info-cards-container {
        flex-direction: column; align-items: center;
    }
    .info-card {
        width: 100%; max-width: 100%;
    }
    /* پنهان کردن افکت ماوس در موبایل */
    #mouse-glow { display: none !important; }
}
</style>
</head>
<body>

<header class="site-header">
    <nav class="nav-links">
        <a href="#">تماس با ما</a>
        <a href="#">بلاگ</a>
        <a href="#">درباره ما</a>
        <a href="#">تعرفه‌ها</a>
        <a href="hosting.html">خدمات <i class="fa-solid fa-chevron-down" style="font-size:0.7em"></i></a> 
        <a href="#">محصولات</a>
        <a href="index.html" class="active">صفحه اصلی</a> 
    </nav>
</header>

<header class="header">
  <div id="mouse-glow"></div>
    <div class="canvas-wrap"><canvas id="gridCanvas" style="width:100%;height:100%;display:block;"></canvas></div>
  <div class="particle-wrap"><canvas id="particleCanvas" style="width:100%;height:100%;display:block;"></canvas></div>

  <div class="header-inner container">
    <div class="profile-glass">
      <div class="avatar">
        <div class="profile-decorator"></div> 
        <img src="https://cdn.discordapp.com/avatars/1275540868186636348/40ba6f6de4001fe4a2dbc3122874f109.png?size=1024" alt="skilljava avatar">
        <div id="discordStatusDot" class="discord-status-dot"><i id="statusIcon" class="fas fa-circle-notch"></i></div> 
      </div>
      <div class="meta">
        <div class="name">@skilljava</div>
        <div class="subtitle">Java • Discord bots • Server & network development</div>
        <div class="badge">
            <span class="dot" id="orderStatusDot"></span>
            <span id="orderStatusText">Ready to accept orders</span>
        </div>
      </div>
    </div>
    <div class="header-desc">I'm a software developer specialized in <strong>Java</strong>, <strong>Discord bot development</strong>, full-stack web projects and game server management. I build optimized, maintainable systems and enjoy improving performance and player experience.</div>

    <div class="info-cards-container">
      <div class="info-card">
        <h3>Projects</h3>
        <p>
          <span style="display:block; margin-bottom:8px;"><strong>FreshSMP</strong> – Custom plugins & bot integration</span>
          <span style="display:block; margin-bottom:8px;"><strong>ZedarMC</strong> – Development of moderation tools & features</span>
          <span style="display:block;"><strong>Eternull SMP</strong> – Owner & developer, server management & events</span>
        </p>
      </div>
      
      <div class="info-card" id="discordActivityCard">
        <h3 style="display:flex; align-items:center;">
             Status 
            <span id="dndStatusBadge"></span>
        </h3> 
        <div id="spotifyContent"></div>
        <div id="discordActivityContent">
            <p style="text-align:center; opacity:0.7">Loading status...</p>
        </div>
      </div>
      
      <div class="info-card">
        <h3>Links</h3>
        <p>
          <a href="https://github.com/skilljava" class="social-link" target="_blank">
            <i class="fab fa-github social-icon"></i> <span>GitHub /skilljava</span>
          </a>
          <a href="https://skilljava.ir" class="social-link" target="_blank">
            <i class="fas fa-globe social-icon"></i> <span>Portfolio /skilljava.ir</span>
          </a>
          <a href="#" class="social-link" target="_blank">
            <i class="fab fa-discord social-icon"></i> <span>Discord Server (Join)</span>
          </a>
        </p>
      </div>
      
      <div class="info-card">
        <h3>Skills</h3>
        <div class="skill-list">
          <div class="skill-item"><span class="skill-name">Java</span><span class="skill-percentage">95%</span></div>
          <div class="skill-item"><span class="skill-name">JavaScript</span><span class="skill-percentage">90%</span></div>
          <div class="skill-item"><span class="skill-name">Node.js</span><span class="skill-percentage">80%</span></div>
          <div class="skill-item"><span class="skill-name">Discord.js</span><span class="skill-percentage">75%</span></div>
          <div class="skill-item"><span class="skill-name">HTML/CSS</span><span class="skill-percentage">85%</span></div>
          <div class="skill-item"><span class="skill-name">MySQL</span><span class="skill-percentage">70%</span></div>
          <div class="skill-item"><span class="skill-name">Git</span><span class="skill-percentage">55%</span></div>
          <div class="skill-item"><span class="skill-name">PowerShell</span><span class="skill-percentage">60%</span></div>
          <div class="skill-item"><span class="skill-name">Python</span><span class="skill-percentage">70%</span></div>
        </div>
      </div>
    </div>
  </div>
</header>

<footer class="footer">
  <div class="container" style="display:flex;align-items:center;justify-content:center;gap:10px; color: #777;">
    <span>Coded by skilljava</span>
  </div>
</footer>

<script>
// --- Grid & Particle Canvas ---
const gridCanvas=document.getElementById("gridCanvas");
// فقط در صورت وجود المنت‌ها، عملیات را انجام بده
if (gridCanvas) {
    const gc=gridCanvas.getContext("2d");
    function resizeGrid(){gridCanvas.width=window.innerWidth;gridCanvas.height=window.innerHeight;}
    resizeGrid();
    window.addEventListener("resize",resizeGrid);
    let offset=0;
    function drawGrid(){
        gc.clearRect(0,0,gridCanvas.width,gridCanvas.height);
        gc.strokeStyle="rgba(255,255,255,0.08)";
        gc.lineWidth=1;
        const size=40; offset+=0.15;
        if(offset>size) offset=0; 
        for(let x=-offset;x<gridCanvas.width;x+=size){gc.beginPath();gc.moveTo(x,0);gc.lineTo(x,gridCanvas.height);gc.stroke();}
        for(let y=-offset;y<gridCanvas.height;y+=size){gc.beginPath();gc.moveTo(0,y);gc.lineTo(gridCanvas.width,y);gc.stroke();}
        requestAnimationFrame(drawGrid);
    }
    drawGrid();
}


// --- Card Hover Effect ---
const infoContainer=document.querySelector('.info-cards-container');
if (infoContainer) {
    infoContainer.addEventListener('mouseenter',()=>{infoContainer.classList.add('hovered');});
    infoContainer.addEventListener('mouseleave',()=>{infoContainer.classList.remove('hovered');});
}


// --- Discord Lanyard Integration (بدون تغییر در منطق، فقط افزودن چک‌های خطا) ---
const DISCORD_USER_ID = '1275540868186636348'; 

const statusDot = document.getElementById('discordStatusDot'); 
const statusIcon = document.getElementById('statusIcon'); 
const activityContent = document.getElementById('discordActivityContent'); 
const spotifyContent = document.getElementById('spotifyContent'); 
const dndStatusBadge = document.getElementById('dndStatusBadge'); 
const orderStatusDot = document.getElementById('orderStatusDot'); 
const orderStatusText = document.getElementById('orderStatusText'); 

let spotifyInterval;

function formatTime(ms) {
    const totalSeconds = Math.floor(ms / 1000);
    const minutes = Math.floor(totalSeconds / 60);
    const seconds = totalSeconds % 60;
    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
}

function updateProgressBar(data) {
    if (!data || !data.spotify || !data.spotify.timestamps) {
        if (spotifyInterval) clearInterval(spotifyInterval);
        return;
    }

    const start = data.spotify.timestamps.start;
    const end = data.spotify.timestamps.end;
    const now = Date.now();

    const duration = end - start;
    let elapsed = now - start;
    
    if (elapsed > duration) {
        elapsed = duration;
        if (spotifyInterval) clearInterval(spotifyInterval);
        spotifyInterval = null;
    }

    const percentage = (elapsed / duration) * 100;

    const progressFill = document.getElementById('spotifyProgressFill');
    const currentTimeSpan = document.getElementById('spotifyCurrentTime');

    if (progressFill) {
        progressFill.style.width = `${percentage}%`;
    }
    if (currentTimeSpan) {
        currentTimeSpan.textContent = formatTime(elapsed);
    }
}


function updateDiscordStatus(data) {
    if (!statusDot || !statusIcon || !dndStatusBadge || !orderStatusDot || !orderStatusText || !activityContent) return;

    if (!data || !data.discord_status) {
        const color = 'var(--offline)';
        statusDot.style.backgroundColor = color;
        statusIcon.className = 'fas fa-circle-notch';
        orderStatusDot.style.backgroundColor = color;
        orderStatusText.textContent = 'Status is unavailable';
        
        dndStatusBadge.innerHTML = `<i class="fas fa-circle-notch"></i> Offline`; 
        dndStatusBadge.style.backgroundColor = color;
        dndStatusBadge.style.color = 'white';
        
        activityContent.innerHTML = '<p style="text-align:center; opacity:0.7">Discord status is unavailable or user is offline.</p>';
        spotifyContent.innerHTML = ''; 
        if (spotifyInterval) clearInterval(spotifyInterval);
        spotifyInterval = null;
        return;
    }
    
    const status = data.discord_status; 
    let color, iconClassDot, iconClassCard, iconText, badgeTextColor;

    switch (status) {
        case 'online': 
            color = 'var(--green)'; 
            iconClassDot = 'fas fa-circle'; 
            iconClassCard = 'fas fa-circle'; 
            iconText = 'Online'; 
            badgeTextColor = 'white'; 
            break;
        case 'idle': 
            color = 'var(--yellow)'; 
            iconClassDot = 'fas fa-moon'; 
            iconClassCard = 'fas fa-moon'; 
            iconText = 'Idle'; 
            badgeTextColor = 'white';
            break;
        case 'dnd': 
            color = 'var(--red-dnd)'; 
            iconClassDot = 'fas fa-minus'; 
            iconClassCard = 'fas fa-minus'; 
            iconText = 'DND';
            badgeTextColor = 'white';
            break;
        default: 
            color = 'var(--offline)'; 
            iconClassDot = 'fas fa-circle-notch'; 
            iconClassCard = 'fas fa-circle-notch'; 
            iconText = 'Offline'; 
            badgeTextColor = 'white';
            break;
    }

    statusDot.style.backgroundColor = color; 
    statusIcon.className = iconClassDot; 
    orderStatusDot.style.backgroundColor = color; 
    
    dndStatusBadge.innerHTML = `<i class="${iconClassCard}"></i> ${iconText}`;
    dndStatusBadge.style.backgroundColor = color; 
    dndStatusBadge.style.color = badgeTextColor; 
    
    orderStatusText.textContent = (status === 'dnd') ? 'Currently busy/Do Not Disturb' : 'Ready to accept orders';


    // --- مدیریت اسپاتیفای ---
    const isListeningToSpotify = data.spotify;
    
    if (spotifyInterval) {
        clearInterval(spotifyInterval);
        spotifyInterval = null;
    }
    spotifyContent.innerHTML = ''; 

    if (isListeningToSpotify) {
        const albumArtUrl = isListeningToSpotify.album_art_url;
        const songName = isListeningToSpotify.song; 
        const artistName = isListeningToSpotify.artist;
        const duration = isListeningToSpotify.timestamps.end - isListeningToSpotify.timestamps.start;
        const durationFormatted = formatTime(duration);

        const spotifyHtml = `
            <div style="border-left: 3px solid var(--green); padding-left: 10px; margin-bottom: 15px;">
                <p style="margin: 0 0 5px 0; font-size: 0.8rem; color: var(--green); font-weight: 700;">
                    <i class="fab fa-spotify"></i> LISTENING TO SPOTIFY
                </p>
                <div class="spotify-track-info">
                    <img src="${albumArtUrl}" class="spotify-album-art" alt="Album Art">
                    <div class="spotify-details">
                        <span class="spotify-title">${songName}</span>
                        <span class="spotify-artist">by ${artistName}</span>
                    </div>
                </div>
                <div class="spotify-progress-bar">
                    <div id="spotifyProgressFill" class="spotify-progress-fill"></div>
                </div>
                <div class="spotify-timestamps">
                    <span id="spotifyCurrentTime">${formatTime(0)}</span>
                    <span>${durationFormatted}</span>
                </div>
            </div>
        `;
        
        spotifyContent.innerHTML = spotifyHtml;

        updateProgressBar(data); 
        spotifyInterval = setInterval(() => updateProgressBar(data), 1000);
    }


    // --- مدیریت سایر فعالیت‌ها ---
    let html = '';
    const activities = data.activities || [];
    
    if (activities.length > 0) {
        activities.forEach(activity => {
            let details = activity.details || '';
            let state = activity.state || '';
            let name = activity.name || 'Custom Status';
            let iconColor = 'var(--accent)';

            if (activity.name === 'Spotify') return;
            
            if (activity.type === 0) { 
                name = 'Playing: ' + activity.name;
                details = activity.details || '';
                state = activity.state || '';
                iconColor = 'var(--green)';
            }
            
            if (activity.type !== 4 && activity.name !== 'Custom Status') {
                html += `
                    <div class="discord-activity-item" style="border-left-color: ${iconColor};">
                        <span class="discord-activity-title" style="font-weight: 700;">${name}</span>
                        ${details ? `<span class="discord-activity-details" style="display: block; font-size: 0.9em; opacity: 0.8;">${details}</span>` : ''}
                        ${state ? `<span class="discord-activity-details" style="display: block; font-size: 0.9em; opacity: 0.7;">${state}</span>` : ''}
                    </div>
                `;
            }
        });
    }

    if (html === '' && !isListeningToSpotify) {
        html = '<p style="text-align:center; opacity:0.7">No visible activity right now.</p>';
    } else if (html === '' && isListeningToSpotify) {
        html = '<p style="text-align:center; opacity:0.7">No other visible activity.</p>'; 
    }
    
    activityContent.innerHTML = html;
}

function fetchDiscordStatus() {
    if (!statusDot) return;
    
    fetch(`https://api.lanyard.rest/v1/users/${DISCORD_USER_ID}`)
        .then(response => response.json())
        .then(result => {
            if (result.success) {
                updateDiscordStatus(result.data);
            } else {
                updateDiscordStatus(null);
            }
        })
        .catch(error => {
            console.error("Error fetching Lanyard status:", error);
            updateDiscordStatus(null);
        });
}

fetchDiscordStatus();
setInterval(fetchDiscordStatus, 10000); 

// --- Mouse Glow Effect Script ---
document.addEventListener('mousemove', function(e) {
    const mouseGlow = document.getElementById('mouse-glow');
    if (mouseGlow) {
        mouseGlow.style.left = e.clientX + 'px';
        mouseGlow.style.top = e.clientY + 'px';
    }
});
</script>
</body>
</html>
